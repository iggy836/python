# RPG戦闘システム - プログラム解説

## 1. プログラムの全体構造

このプログラムは、以下の4つの主要な関数で構成されています：

1. `show_status`: ステータス表示を担当
2. `show_actions`: 行動選択肢の表示を担当
3. `player_turn`: プレイヤーの行動処理を担当
4. `slime_turn`: スライムの行動処理を担当
5. `main`: ゲーム全体の進行を制御

## 2. 各関数の詳細解説

### 2.1 show_status関数
```python
def show_status(player_hp, player_mp, slime_hp, rage_gauge, turn):
```
- **目的**: 現在の戦闘状況を画面に表示します
- **引数**:
  - `player_hp`: プレイヤーの体力（最大100）
  - `player_mp`: プレイヤーの魔力（最大50）
  - `slime_hp`: スライムの体力（最大50）
  - `rage_gauge`: スライムの怒りゲージ（最大100）
  - `turn`: 現在のターン数
- **表示内容**:
  - ターン数
  - プレイヤーのHP/MP
  - スライムのHP/怒りゲージ

### 2.2 show_actions関数
```python
def show_actions():
```
- **目的**: プレイヤーが選択できる行動を表示します
- **選択肢**:
  1. 剣での攻撃（10ダメージ）
  2. 回復魔法（MP20消費、HP30回復）
  3. 火炎魔法（MP30消費、20ダメージ）

### 2.3 player_turn関数
```python
def player_turn(player_hp, player_mp, slime_hp, rage_gauge):
```
- **目的**: プレイヤーの行動を処理します
- **主な処理**:
  1. 行動選択の入力受付
  2. 選択された行動の実行
  3. MP不足時の処理
  4. 不正入力のエラー処理
- **戻り値**: 更新後の各ステータス値をタプルで返します

#### 行動別の効果
1. **剣での攻撃**:
   - スライムに10ダメージ
   - MPは消費しない

2. **回復魔法**:
   - MP20消費
   - HP30回復（最大値を超えない）
   - スライムの怒りゲージが40%上昇
   - MP不足時は15ダメージを受ける

3. **火炎魔法**:
   - MP30消費
   - スライムに20ダメージ
   - MP不足時は15ダメージを受ける

### 2.4 slime_turn関数
```python
def slime_turn(player_hp, slime_hp, rage_gauge):
```
- **目的**: スライムの行動を処理します
- **攻撃パターン**:
  1. 通常時: 10ダメージ
  2. HP50%以下: 15ダメージ
  3. 怒りゲージ100%: 30ダメージ（ゲージリセット）
- **特徴**: 
  - ターン終了時に怒りゲージが20%上昇
  - 回復魔法使用時に追加で40%上昇

### 2.5 main関数
```python
def main():
```
- **目的**: ゲーム全体の進行を制御します
- **主な処理の流れ**:
  1. 初期ステータスの設定
  2. ターンの開始
  3. プレイヤーの行動
  4. 勝利/敗北判定
  5. スライムの行動
  6. 勝利/敗北判定
  7. ターン数の更新

## 3. ゲームの進行の仕組み

### 3.1 ターンの流れ
1. ターン開始時にステータス表示
2. プレイヤーの行動選択と実行
3. 勝利/敗北判定
4. スライムの行動実行
5. 勝利/敗北判定
6. 次のターンへ

### 3.2 勝利/敗北条件
- **勝利条件**: スライムのHPが0以下
- **敗北条件**: プレイヤーのHPが0以下

## 4. プログラムの特徴

### 4.1 エラー処理
- 不正な入力に対する例外処理
- MP不足時の適切な処理
- HPの最大値管理

### 4.2 バランス調整
- 各攻撃のダメージ量
- MP消費量
- 回復量
- 怒りゲージの上昇量

### 4.3 ユーザーフレンドリーな表示
- 詳細なステータス表示
- 分かりやすい行動選択
- 行動結果の明確な表示

## 5. プログラミング学習のポイント

1. **関数の設計**
   - 適切な引数と戻り値の設定
   - 責務の分離

2. **変数の管理**
   - ステータス値の更新
   - 最大値/最小値の制御

3. **条件分岐**
   - if-elif-else文の使用
   - 複数条件の組み合わせ

4. **例外処理**
   - try-except文の活用
   - エラー時の適切な対応

5. **ユーザー入力**
   - input関数の使用
   - 入力値の検証

## 6. 発展の可能性

1. **システムの拡張**
   - 新しい攻撃パターンの追加
   - アイテムシステムの実装
   - 経験値システムの追加

2. **UI/UXの改善**
   - グラフィカルな表示
   - サウンド効果の追加
   - アニメーション効果

3. **ゲームバランスの調整**
   - 難易度設定の追加
   - 新しい敵キャラクターの追加
   - 装備システムの実装 